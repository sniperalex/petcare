<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cadastro - PetCare System (v1.22)</title> <!-- Versão Atualizada -->
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
     <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="style.css">
     <style>
        /* Estilos específicos já estão no style.css principal v1.20.2+ */
         body.self-registering main.content-wrapper { display: flex; flex-grow: 1; align-items: center; justify-content: center; }
    </style>
</head>
<!-- Classes 'admin-registering' ou 'self-registering' serão adicionadas via JS -->
<body class="body-with-sidebar"> <!-- Classe padrão para JS checar -->

    <!-- Header Mobile (Mostrado/Oculto por JS/CSS - visível apenas se admin logado) -->
    <header class="mobile-header d-lg-none">
        <i class="bi bi-list nav_toggle mobile-toggle" id="mobile-nav-toggle"></i>
        <span class="mobile-header-title">Cadastrar Usuário</span>
         <span class="me-2 small" id="loggedInUserNameDisplayMobile"></span>
         <!-- Botão Logout Mobile Adicionado v1.20 -->
        <a href="#" id="header-logout-link-mobile" class="btn btn-sm btn-outline-light ms-2" title="Sair"><i class="bi bi-box-arrow-right"></i></a>
        <div class="form-check form-switch ms-2"> <!-- Ajustado margin -->
            <input class="form-check-input" type="checkbox" id="darkModeSwitchMobile" role="switch">
            <label class="form-check-label visually-hidden" for="darkModeSwitchMobile">Modo Escuro</label>
        </div>
    </header>

    <!-- Sidebar (Mostrado/Oculto por JS/CSS - visível apenas se admin logado) -->
    <div class="l-navbar" id="navbar">
        <nav class="nav">
             <div> <!-- Wrapper para Brand e Lista (Flex Grow) v1.20 -->
                <div class="nav_brand">
                    <i class="bi bi-list nav_toggle d-none d-lg-block" id="desktop-nav-toggle"></i>
                    <a href="dashboard.html" class="nav_logo">PetCare</a>
                </div>
                 <!-- Menu Lateral CORRIGIDO v1.20 -->
                <div class="nav_list">
                    <a href="dashboard.html" class="nav_link"><i class="bi bi-grid nav_icon"></i><span class="nav_name">Dashboard</span></a>
                    <a href="pets.html" class="nav_link"><i class="bi bi-heart-fill nav_icon"></i><span class="nav_name">Pets</span></a>
                    <a href="consultations.html" class="nav_link"><i class="bi bi-calendar-check nav_icon"></i><span class="nav_name">Consultas</span></a>
                    <a href="recipes.html" class="nav_link"><i class="bi bi-journal-text nav_icon"></i><span class="nav_name">Receitas</span></a>
                    <a href="profile.html" class="nav_link"><i class="bi bi-person-badge nav_icon"></i><span class="nav_name">Meu Perfil</span></a>
                    <a href="register.html" class="nav_link admin-only active"><i class="bi bi-person-plus nav_icon"></i><span class="nav_name">Cadastrar Usuário</span></a>
                    <a href="manage_users.html" class="nav_link admin-only"><i class="bi bi-people nav_icon"></i><span class="nav_name">Gerenciar Usuários</span></a>
                </div>
            </div>
             <!-- Link Sair fora do div que cresce v1.20 -->
            <a href="#" class="nav_link" id="logout-link"><i class="bi bi-box-arrow-left nav_icon"></i><span class="nav_name">Sair</span></a>
        </nav>
    </div>

     <!-- Container para o switch de modo escuro (Páginas Públicas / Auto-cadastro) -->
     <div class="theme-switch-container">
         <div class="form-check form-switch">
            <input class="form-check-input" type="checkbox" id="darkModeSwitch" role="switch">
            <label class="form-check-label" for="darkModeSwitch">Modo Escuro</label>
        </div>
     </div>

    <!-- Conteúdo Principal -->
    <main class="content-wrapper" id="content-wrapper">
        <!-- Container do formulário (pode ser dentro de .container-fluid ou não, dependendo do estilo) -->
        <div class="register-form-container">
            <!-- Título definido via JS -->
            <h2 id="registerPageTitle">Cadastro</h2>
            <form id="registerUserForm" action="#" method="POST" class="needs-validation" novalidate>
                <div class="row g-3">
                    <!-- Mensagem geral movida para o TOPO para melhor visibilidade -->
                    <div class="col-12">
                        <div id="form-message" class="form-message"></div>
                    </div>

                    <div class="col-12">
                        <label for="name" class="form-label">Nome Completo <span class="text-danger">*</span></label>
                        <input type="text" class="form-control" id="name" required>
                        <div class="invalid-feedback">Por favor, insira o nome completo.</div>
                    </div>
                    <div class="col-12">
                        <label for="email" class="form-label">Email <span class="text-danger">*</span></label>
                        <input type="email" class="form-control" id="email" required>
                         <!-- Feedback padrão do Bootstrap para formato inválido ou campo obrigatório -->
                        <div class="invalid-feedback">Por favor, insira um email válido.</div>
                         <!-- A mensagem de email duplicado será mostrada na div#form-message geral -->
                    </div>
                    <div class="col-md-6">
                        <label for="password" class="form-label">Senha <span class="text-danger">*</span></label>
                        <input type="password" class="form-control" id="password" required minlength="6">
                        <div class="invalid-feedback">A senha deve ter pelo menos 6 caracteres.</div>
                    </div>
                    <div class="col-md-6">
                        <label for="confirmPassword" class="form-label">Confirmar Senha <span class="text-danger">*</span></label>
                        <input type="password" class="form-control" id="confirmPassword" required>
                        <div class="invalid-feedback">As senhas não coincidem ou a confirmação está vazia.</div> <!-- Mensagem ajustada -->
                    </div>

                    <!-- Campo de Seleção de Perfil (Visível apenas para Admin - controlado via CSS/JS) -->
                    <div class="col-md-6 profile-select-wrapper">
                        <label for="profileSelect" class="form-label">Perfil do Usuário <span class="text-danger">*</span></label>
                        <select class="form-select" id="profileSelect" required>
                            <option value="" disabled selected>Selecione...</option>
                            <option value="client">Cliente</option>
                            <option value="veterinarian">Veterinário(a)</option>
                            <option value="administrator">Administrador(a)</option>
                        </select>
                        <div class="invalid-feedback">Selecione o perfil do usuário.</div>
                    </div>

                    <!-- Botões de Ação -->
                    <div class="col-12 d-flex flex-wrap gap-2">
                        <button type="submit" class="btn btn-primary" id="registerSubmitButton">
                            <i class="bi bi-check-lg me-1"></i> Cadastrar
                        </button>
                        <!-- Botão Voltar para Login (Auto-cadastro - controlado via CSS/JS) -->
                        <div class="back-login-button-wrapper">
                            <a href="index.html" class="btn btn-secondary">
                                <i class="bi bi-arrow-left me-1"></i> Voltar para Login
                            </a>
                        </div>
                         <!-- Botão Cancelar (Admin - controlado via CSS/JS) -->
                        <div class="cancel-button-wrapper">
                            <a href="manage_users.html" class="btn btn-secondary">
                                <i class="bi bi-x-lg me-1"></i> Cancelar
                            </a> <!-- Volta para gerenciar usuários -->
                        </div>
                    </div>
                </div> <!-- Fim row -->
            </form>
        </div> <!-- Fim register-form-container -->
    </main>

    <!-- Bootstrap JS Bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Custom JS -->
    <script src="script.js"></script> <!-- Carrega script.js V1.22 -->
</body>
</html>