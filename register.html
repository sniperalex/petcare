<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cadastro - PetCare System (v1.8)</title> <!-- Versão Atualizada -->
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
     <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="style.css">
     <style>
        /* Estilos específicos para AUTO-CADASTRO (quando body.self-registering) */
        body.self-registering {
            background-color: var(--body-bg);
            color: var(--text-color);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 1rem !important; /* Sobrescreve padding logado */
            padding-left: 1rem !important; /* Sobrescreve padding logado */
        }
        body.self-registering .register-form-container {
            max-width: 600px;
            width: 100%;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            background-color: var(--card-bg);
        }
        /* Esconde elementos do layout logado quando em auto-cadastro */
        body.self-registering .l-navbar,
        body.self-registering .mobile-header,
        body.self-registering .admin-only { /* Esconde botões/campos só do admin */
            display: none !important;
        }
         /* Garante que o switch de tema global fique visível no canto */
         body.self-registering .theme-switch-container {
             position: absolute; top: 15px; right: 15px; z-index: 1000;
         }
         /* Estilos para CADASTRO PELO ADMIN (quando body.admin-registering) */
         body.admin-registering {
             /* Usa os paddings definidos em style.css para layout logado */
             background-color: var(--body-bg); /* Herda do tema */
         }
         body.admin-registering .register-form-container {
             /* O container ocupa a largura normal dentro do main */
             max-width: 900px; /* Ou ajuste conforme necessário */
             margin: 0 auto; /* Centraliza se a tela for larga */
             padding: 2rem;
             background-color: var(--card-bg); /* Fundo do card */
             border-radius: 8px;
             box-shadow: 0 0 10px rgba(0,0,0,0.1);
             border: 1px solid var(--card-border);
         }
         body.admin-registering .theme-switch-container {
             display: none; /* Esconde o switch global, usa o da sidebar/header */
         }
         /* Controle de visibilidade específico */
         .profile-select-wrapper,
         .cancel-button-wrapper {
             display: none; /* Oculto por padrão */
         }
         body.admin-registering .profile-select-wrapper,
         body.admin-registering .cancel-button-wrapper {
             display: block; /* Mostra para admin */
         }
         body.self-registering .back-login-button-wrapper {
             display: block; /* Mostra botão Voltar Login para auto-cadastro */
         }
         body.admin-registering .back-login-button-wrapper {
             display: none; /* Esconde botão Voltar Login para admin */
         }

    </style>
</head>
<!-- Classes 'admin-registering' ou 'self-registering' serão adicionadas via JS -->
<body class="body-with-sidebar">

    <!-- Header Mobile (será mostrado/oculto por JS/CSS) -->
    <header class="mobile-header d-lg-none">
        <i class="bi bi-list nav_toggle mobile-toggle" id="mobile-nav-toggle"></i>
        <span class="mobile-header-title">Cadastrar Usuário</span>
        <div class="form-check form-switch ms-auto">
            <input class="form-check-input" type="checkbox" id="darkModeSwitchMobile" role="switch">
            <label class="form-check-label visually-hidden" for="darkModeSwitchMobile">Modo Escuro</label>
        </div>
    </header>

    <!-- Sidebar (será mostrado/oculto por JS/CSS) -->
    <div class="l-navbar" id="navbar">
        <nav class="nav">
            <div>
                <div class="nav_brand">
                    <i class="bi bi-list nav_toggle d-none d-lg-block" id="desktop-nav-toggle"></i>
                    <a href="dashboard.html" class="nav_logo">PetCare</a>
                </div>
                <div class="nav_list">
                    <a href="dashboard.html" class="nav_link"><i class="bi bi-grid nav_icon"></i><span class="nav_name">Dashboard</span></a>
                    <a href="pets.html" class="nav_link"><i class="bi bi-heart-fill nav_icon"></i><span class="nav_name">Pets</span></a>
                    <a href="consultations.html" class="nav_link"><i class="bi bi-calendar nav_icon"></i><span class="nav_name">Consultas</span></a>
                    <a href="recipes.html" class="nav_link"><i class="bi bi-journal-text nav_icon"></i><span class="nav_name">Receitas</span></a>
                    <!-- Admin Links -->
                    <a href="register.html" class="nav_link admin-only active"><i class="bi bi-person-plus nav_icon"></i><span class="nav_name">Cadastrar Usuário</span></a> <!-- Link ativo aqui -->
                    <a href="#" class="nav_link admin-only"><i class="bi bi-people nav_icon"></i><span class="nav_name">Gerenciar Usuários</span></a>
                </div>
            </div>
            <a href="index.html" class="nav_link" id="logout-link"><i class="bi bi-box-arrow-left nav_icon"></i><span class="nav_name">Sair</span></a>
        </nav>
    </div>

     <!-- Container para o switch de modo escuro (Páginas Públicas) -->
     <div class="theme-switch-container">
         <div class="form-check form-switch">
            <input class="form-check-input" type="checkbox" id="darkModeSwitch" role="switch">
            <label class="form-check-label" for="darkModeSwitch">Modo Escuro</label>
        </div>
     </div>

    <!-- Conteúdo Principal -->
    <main class="content-wrapper" id="content-wrapper">
        <div class="container-fluid pt-3">
            <!-- Wrapper para o formulário que pode ser centralizado ou não -->
            <div class="register-form-container">
                <h2 id="registerPageTitle">Cadastro</h2> <!-- Título será definido via JS -->
                <form id="registerUserForm" action="#" method="POST" class="needs-validation" novalidate>
                    <div class="row g-3">
                        <div class="col-12">
                            <label for="name" class="form-label">Nome Completo <span class="text-danger">*</span></label>
                            <input type="text" class="form-control" id="name" required>
                            <div class="invalid-feedback">Por favor, insira o nome completo.</div>
                        </div>
                        <div class="col-12">
                            <label for="email" class="form-label">Email <span class="text-danger">*</span></label>
                            <input type="email" class="form-control" id="email" required>
                            <div class="invalid-feedback">Por favor, insira um email válido.</div>
                            <div id="email-exists-feedback" class="invalid-feedback">Este email já está cadastrado.</div> <!-- Feedback específico -->
                        </div>
                        <div class="col-md-6">
                            <label for="password" class="form-label">Senha <span class="text-danger">*</span></label>
                            <input type="password" class="form-control" id="password" required minlength="6">
                            <div class="invalid-feedback">A senha deve ter pelo menos 6 caracteres.</div>
                        </div>
                        <div class="col-md-6">
                            <label for="confirmPassword" class="form-label">Confirmar Senha <span class="text-danger">*</span></label>
                            <input type="password" class="form-control" id="confirmPassword" required>
                            <div class="invalid-feedback">Por favor, confirme sua senha. As senhas não coincidem.</div>
                        </div>

                        <!-- Campo de Seleção de Perfil (Visível apenas para Admin) -->
                        <div class="col-md-6 profile-select-wrapper">
                            <label for="profileSelect" class="form-label">Perfil do Usuário <span class="text-danger">*</span></label>
                            <select class="form-select" id="profileSelect" required>
                                <option value="" disabled selected>Selecione...</option>
                                <option value="client">Cliente</option>
                                <option value="veterinarian">Veterinário(a)</option>
                                <option value="administrator">Administrador(a)</option>
                            </select>
                            <div class="invalid-feedback">Selecione o perfil do usuário.</div>
                        </div>

                        <div class="col-12">
                            <div id="form-message" class="form-message"></div>
                        </div>
                        <div class="col-12 d-flex gap-2">
                            <button type="submit" class="btn btn-primary">Cadastrar</button>
                            <!-- Botão Voltar para Login (Auto-cadastro) -->
                            <div class="back-login-button-wrapper">
                                <a href="index.html" class="btn btn-secondary">Voltar para Login</a>
                            </div>
                             <!-- Botão Cancelar (Admin) -->
                            <div class="cancel-button-wrapper">
                                <a href="dashboard.html" class="btn btn-secondary">Cancelar</a> <!-- Volta para o dashboard do admin -->
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </main>

    <!-- Bootstrap JS Bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Custom JS -->
    <script src="script.js"></script>
</body>
</html>